<!DOCTYPE html>

<html>
<head>
  <title>URF</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="./build/three.min.js"></script>
  <script type="module"  src="./mesh_renderer.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
  <script src="https://d3js.org/topojson.v0.min.js"></script>
</head>
<body>


  <div class="container">
    <h1>Urban Radiance Fields</h1>
    <!-- <h3></h3>
    <br><br> -->
    <div class="col-md-12 text-center">
      <ul class="list-inline">
        <li>
          <a href="http://www.krematas.com/">
            Konstantinos Rematas
          </a>
        </li>
        <li>
          <a href="https://andrewhliu.github.io/">
            Andrew Liu
          </a>
        </li>
        <li>
          <a href="https://pratulsrinivasan.github.io/">
            Pratul P. Srinivasan
          </a>
        </li>
        <br>
        <li>
          <a href="https://jonbarron.info/">
            Jonathan T. Barron
          </a>
        </li>
        <li>
          <a href="https://taiya.github.io/">
            Andrea Tagliasacchi
          </a>
        </li>
        <li>
          <a href="https://www.cs.princeton.edu/~funk/">
            Tom Funkhouser
          </a>
        </li>
        <li>
          <a href="https://sites.google.com/corp/view/vittoferrari">
            Vittorio Ferrari
          </a>
        </li>
        <br>
      </ul>
    </div>

    <div class="row justify-content-md-center icons">
      <div class="col">
        <img src="images/logo_google.png"style="height:28px">
      </div>
    </div>


    <div class="row justify-content-md-center icons">
      <div class="col">
        <a href="images/go_urf.pdf" target="_blank"><i class="fa fa-file-text fa-2x"></i></a>
      </div>
    </div>
    <div class="row justify-content-md-center icons">
      <div class="col">
        Paper
      </div>
    </div>


    <div class="row justify-content-md-center">
      <div class="col teaser">
        <img src="./images/teaser.png">
      </div>
    </div>
    <div class="row justify-content-md-center icons">
      <img src="data/gifs/intro.gif">
    </div>


  </div>
  <div class="container">
    <h2>Abstract</h2>
    <p>
      The goal of this work is to perform 3D reconstruction and novel view synthesis
      from data captured by scanning platforms commonly deployed for world mapping
      in urban outdoor environments (e.g., Street View).
      Given a sequence of posed RGB images and lidar sweeps acquired by cameras
      and scanners moving through an outdoor scene, we produce a model from which
      3D surfaces can be extracted and novel RGB images can be synthesized.
      Our approach extends Neural Radiance Fields, which has been demonstrated
      to synthesize realistic novel images for small scenes in controlled settings,
      with new methods for leveraging asynchronously captured lidar data,
      for addressing exposure variation between captured images,
      and for leveraging predicted image segmentations to supervise densities on
      rays pointing at the sky.
      Each of these three extensions provides significant performance improvements
      in experiments on Street View data. Our system produces state-of-the-art
      3D surface reconstructions and synthesizes higher quality novel views in
      comparison to both traditional methods (e.g.~COLMAP) and recent neural
      representations (e.g.~Mip-NeRF).
    </p>
  </div>

  <div class="container">
    <h2>Video</h2>
    <div class="row justify-content-md-center icons">
      <video width="640" height="360" controls>
        <source src="images/video.mp4" type="video/mp4">
      Your browser does not support the video tag.
      </video>
    </div>
  </div>

  <div class="container">
    <h2>Novel View Synthesis</h2>
    <p>Click on a city to visualize the sequence (wait a bit to load).</p>
    <div class="row justify-content-md-center icons" id="map">
      <script type="text/javascript">
        var width = 960,
            height = 500;

        var projection = d3.geo.mercator()
            .center([0, 0 ])
            .scale(150)
            .rotate([0,0]);

        var svg = d3.select("#map").append("svg")
            .attr("width", width)
            .attr("height", height);

        var path = d3.geo.path()
            .projection(projection);

        var g = svg.append("g");

        // load and display the World

        d3.json("data/world-110m2.json", function(error, topology) {

          // load and display the cities
          d3.csv("data/cities.csv", function(error, data) {
              g.selectAll("circle")
                .data(data)
                .enter()
                // .append("a")
                //     .attr("xlink:href", function(d) {
                //       return "https://www.google.com/search?q="+d.city;}
                //     )
                .append("circle")
                .attr("cx", function(d) {
                        return projection([d.lon, d.lat])[0];
                })
                .attr("cy", function(d) {
                        return projection([d.lon, d.lat])[1];
                })
                .attr("r", 5)
                .style("fill", "red")
                .on('click', function(d, i) {
                  console.log(d);
                    d3.select(this)
                      .transition()
                      .attr('r', 20)
                      .transition()
                      .attr('r', 5);
                    d3.select('#gifs').attr("src", function(dd) {
                      return "data/gifs/"+d.city+".gif";}
                    )
                  })
          });
          g.selectAll("path")
          .data(topojson.object(topology, topology.objects.countries).geometries)
          .enter()
          .append("path")
          .attr("d", path)
        });

        svg.selectAll('circle')
        .on('click', function(d, i) {
            console.log("clicking on", this);
            // transition the clicked element
            // to have a radius of 20
            d3.select(this)
              .transition()
              .attr('r', 20);
          })

      </script>


    </div>
    <div class="row justify-content-md-center icons">
      <img src="data/gifs/sydney.gif" id='gifs'>
    </div>
  </div>

  <div class="container">
    <h2>Mesh</h2>
    <div class="row justify-content-md-center icons">
      <div id="canvas"></div>
    </div>
  </div>


</body>
</html>
